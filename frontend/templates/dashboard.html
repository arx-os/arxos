<!-- Dashboard Template - Served by backend via HTMX -->
<div class="dashboard">
    <div class="dashboard-container">
        <!-- Left sidebar -->
        <aside class="dashboard-sidebar">
            <div class="user-card">
                <div class="user-avatar-large">{{.User.Initial}}</div>
                <h2>{{.User.Name}}</h2>
                <p class="text-muted">{{.User.Role}}</p>
                <button class="btn btn-default btn-block mt-3" 
                        hx-get="/api/profile/edit" 
                        hx-target="#main-content">
                    Edit profile
                </button>
            </div>

            <div class="stats-card">
                <h3>Overview</h3>
                <div class="stat-item">
                    <i class="fas fa-building stat-icon"></i>
                    <div class="stat-content">
                        <div class="stat-value">{{.Stats.TotalBuildings}}</div>
                        <div class="stat-label">Total Buildings</div>
                    </div>
                </div>
                <div class="stat-item">
                    <i class="fas fa-chart-line stat-icon"></i>
                    <div class="stat-content">
                        <div class="stat-value">{{.Stats.ActiveAnalyses}}</div>
                        <div class="stat-label">Active Analyses</div>
                    </div>
                </div>
                <div class="stat-item">
                    <i class="fas fa-expand stat-icon"></i>
                    <div class="stat-content">
                        <div class="stat-value">{{.Stats.TotalSqFt}}</div>
                        <div class="stat-label">Total Sq Ft</div>
                    </div>
                </div>
                <div class="stat-item">
                    <i class="fas fa-map-pin stat-icon"></i>
                    <div class="stat-content">
                        <div class="stat-value">{{.Stats.DataPoints}}</div>
                        <div class="stat-label">Data Points</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main content -->
        <main class="dashboard-main">
            <!-- Recent buildings -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>Recent Buildings</h2>
                    <a href="/buildings" class="btn btn-sm btn-default" 
                       hx-get="/api/buildings" 
                       hx-target="#main-content"
                       hx-push-url="true">
                        View all
                    </a>
                </div>

                <div class="buildings-grid">
                    {{range .RecentBuildings}}
                    <a href="/buildings/{{.ID}}" 
                       class="building-card"
                       hx-get="/api/buildings/{{.ID}}"
                       hx-target="#main-content"
                       hx-push-url="true">
                        <div class="building-card-header">
                            <div class="building-info">
                                <h3 class="building-name">
                                    {{if .Starred}}<i class="fas fa-star star-icon"></i>{{end}}
                                    {{.Name}}
                                </h3>
                                <p class="building-type">{{.Type}}</p>
                            </div>
                            <span class="status-badge status-{{.Status}}">{{.StatusLabel}}</span>
                        </div>
                        <p class="building-address">
                            <i class="fas fa-map-pin"></i>
                            {{.Address}}
                        </p>
                        <div class="building-meta">
                            <span class="building-updated">
                                <i class="fas fa-clock"></i>
                                Updated {{.LastModifiedRelative}}
                            </span>
                        </div>
                    </a>
                    {{end}}
                </div>

                <a href="/buildings/new" 
                   class="new-building-prompt"
                   hx-get="/api/buildings/new"
                   hx-target="#main-content"
                   hx-push-url="true">
                    <i class="fas fa-building"></i>
                    <div>
                        <h3>Add a new building</h3>
                        <p>Import floor plans, configure spaces, and start analyzing</p>
                    </div>
                </a>
            </section>

            <!-- Activity feed -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>Recent Activity</h2>
                </div>

                <div class="activity-feed">
                    {{range .Activities}}
                    <div class="activity-item">
                        <div class="activity-icon">
                            {{.Icon}}
                        </div>
                        <div class="activity-content">
                            <div class="activity-description">
                                <strong>{{.Building}}</strong>
                                <span class="text-muted"> Â· {{.Description}}</span>
                            </div>
                            <div class="activity-time text-small text-muted">
                                {{.TimeRelative}}
                            </div>
                        </div>
                    </div>
                    {{end}}
                </div>
            </section>
        </main>
    </div>
</div>