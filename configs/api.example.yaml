# ArxOS API Server Configuration Example
# Copy this file to api.yaml and customize for your environment

# Server configuration
server:
  address: ":8080"
  read_timeout: 15s
  write_timeout: 15s
  idle_timeout: 60s

# CORS configuration
cors:
  allowed_origins:
    - "http://localhost:3000"
    - "http://localhost:8080"
    - "https://app.arxos.io"
  allowed_methods:
    - GET
    - POST
    - PUT
    - DELETE
    - PATCH
    - OPTIONS
  allowed_headers:
    - Content-Type
    - Authorization
    - X-Request-ID
    - X-API-Version
  max_age: 3600

# Rate limiting configuration
rate_limit:
  requests_per_minute: 100
  burst_size: 10
  cleanup_interval: 1m
  client_ttl: 5m

# TLS/HTTPS configuration
tls:
  enabled: false
  cert_file: ""
  key_file: ""
  min_version: 0x0303  # TLS 1.2
  
  # Let's Encrypt automatic certificate management
  auto_cert: false
  auto_cert_domains:
    - api.arxos.io
    - staging-api.arxos.io
  auto_cert_email: admin@arxos.io
  auto_cert_staging: false  # Use Let's Encrypt staging for testing

# API response caching
cache:
  enabled: true
  default_ttl: 5m
  prefix: "arxos:api:"

# Prometheus metrics
metrics:
  enabled: true
  port: 9090
  path: "/metrics"

# API versioning
versioning:
  default_version: "v1"
  supported_versions:
    - v1
    - v2

# Redis cache backend
redis:
  host: localhost
  port: 6379
  password: ""
  db: 0
  pool_size: 10
  min_idle_conns: 5

# Database configuration  
database:
  host: localhost
  port: 5432
  name: arxos
  user: arxos
  password: ""
  ssl_mode: disable
  max_connections: 25
  max_idle_connections: 5
  connection_max_lifetime: 5m

# Logging
logging:
  level: info  # debug, info, warn, error
  format: json  # json or text
  output: stdout  # stdout, stderr, or file path

# Security
security:
  jwt_secret: "change-this-secret-in-production"
  jwt_expiry: 24h
  refresh_token_expiry: 168h  # 7 days
  bcrypt_cost: 12
  
# Feature flags
features:
  enable_registration: true
  enable_password_reset: true
  enable_api_docs: true
  enable_metrics: true
  enable_tracing: false
