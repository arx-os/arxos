# Plumbing System Template
# Defines water supply and drainage system topology

name: Plumbing System
category: plumbing
description: Water supply, drainage, and waste systems

hierarchy:
  - level: 1
    name: Service Connection
    subtypes:
      - water_meter
      - main_shutoff
      - backflow_preventer
    feeds: [water_heater, distribution_pipe]

  - level: 2
    name: Treatment & Distribution
    subtypes:
      - water_heater
      - water_softener
      - pressure_tank
      - main_supply_line
    feeds: [branch_line, riser]

  - level: 3
    name: Branch Lines
    subtypes:
      - hot_water_line
      - cold_water_line
      - riser_pipe
      - branch_pipe
    feeds: [fixture, valve]

  - level: 4
    name: Control & Distribution
    subtypes:
      - shutoff_valve
      - pressure_reducing_valve
      - mixing_valve
      - fixture_supply
    feeds: [fixture]

  - level: 5
    name: Fixtures
    subtypes:
      - sink
      - toilet
      - urinal
      - drinking_fountain
      - shower
      - faucet
    terminal: true
    drains_to: [drain_line]

  - level: 6
    name: Drainage
    subtypes:
      - drain_line
      - vent_pipe
      - trap
      - cleanout
      - sewer_line
    terminal: true

relationships:
  - type: feeds
    description: Supplies water to fixture/pipe
    properties:
      pipe_size: string
      material: "copper|pex|pvc|cpvc|cast_iron"
      pressure_psi: number

  - type: drains_to
    description: Drainage path
    properties:
      drain_size: string
      slope: number

equipment_properties:
  water_heater:
    - capacity_gallons
    - fuel_type  # electric, gas, solar
    - recovery_rate
    - temperature_setting

  valve:
    - valve_type  # gate, ball, globe, check
    - size
    - pressure_rating

  fixture:
    - gpm_flow_rate
    - ada_compliant
    - sensor_operated

