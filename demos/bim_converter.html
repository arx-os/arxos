<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arxos BIM Converter - 100% Accuracy Focus</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a1a;
            color: #e0e0e0;
            overflow: hidden;
        }

        /* Layout Grid */
        .app-container {
            display: grid;
            grid-template-areas: 
                "header header header"
                "sidebar viewport properties"
                "status status status";
            grid-template-columns: 300px 1fr 350px;
            grid-template-rows: 60px 1fr 40px;
            height: 100vh;
        }

        /* Header */
        .header {
            grid-area: header;
            background: #2a2a2a;
            border-bottom: 1px solid #444;
            display: flex;
            align-items: center;
            padding: 0 20px;
            gap: 20px;
        }

        .header h1 {
            font-size: 20px;
            font-weight: 500;
        }

        .confidence-indicator {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .confidence-value {
            font-size: 24px;
            font-weight: bold;
        }

        .confidence-high { color: #4CAF50; }
        .confidence-medium { color: #FFC107; }
        .confidence-low { color: #F44336; }

        /* Sidebar */
        .sidebar {
            grid-area: sidebar;
            background: #252525;
            border-right: 1px solid #444;
            padding: 20px;
            overflow-y: auto;
        }

        .upload-section {
            margin-bottom: 30px;
        }

        .upload-dropzone {
            border: 2px dashed #666;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upload-dropzone:hover {
            border-color: #4a9eff;
            background: rgba(74, 158, 255, 0.05);
        }

        .upload-dropzone.dragover {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
        }

        /* Processing Controls */
        .processing-controls {
            margin-top: 20px;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 12px;
            text-transform: uppercase;
            color: #999;
        }

        .control-group input[type="range"] {
            width: 100%;
        }

        .control-group select {
            width: 100%;
            padding: 8px;
            background: #1a1a1a;
            border: 1px solid #444;
            color: #e0e0e0;
            border-radius: 4px;
        }

        /* Viewport */
        .viewport {
            grid-area: viewport;
            background: #1a1a1a;
            position: relative;
            overflow: hidden;
        }

        #building-viewer {
            width: 100%;
            height: 100%;
            position: relative;
        }

        #floor-plan {
            width: 100%;
            height: 100%;
            cursor: grab;
        }

        #floor-plan.panning {
            cursor: grabbing;
        }

        #interaction-layer {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
        }

        /* SVG Styles */
        .wall {
            fill: #333;
            stroke: #000;
            stroke-width: 1;
            transition: fill 0.2s ease;
        }

        .wall:hover {
            fill: #555;
            cursor: pointer;
        }

        .wall.selected {
            fill: #4a9eff;
            stroke: #fff;
            stroke-width: 2;
        }

        .wall.error {
            fill: #F44336;
            opacity: 0.7;
        }

        .room {
            fill: rgba(100, 150, 255, 0.1);
            stroke: #4a9eff;
            stroke-width: 0.5;
        }

        .room:hover {
            fill: rgba(100, 150, 255, 0.2);
        }

        .room-label {
            fill: #999;
            font-size: 12px;
            text-anchor: middle;
            pointer-events: none;
        }

        /* Properties Panel */
        .properties {
            grid-area: properties;
            background: #252525;
            border-left: 1px solid #444;
            padding: 20px;
            overflow-y: auto;
        }

        .validation-issues {
            margin-top: 20px;
        }

        .issue-item {
            background: #2a2a2a;
            border-left: 3px solid #F44336;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
        }

        .issue-item.warning {
            border-left-color: #FFC107;
        }

        .issue-item.info {
            border-left-color: #2196F3;
        }

        .issue-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .issue-description {
            font-size: 14px;
            color: #999;
        }

        /* Manual Review Interface */
        .review-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 30px;
            z-index: 1000;
            min-width: 500px;
            display: none;
        }

        .review-panel.active {
            display: block;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .review-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }

        .btn-primary {
            background: #4a9eff;
            color: white;
        }

        .btn-primary:hover {
            background: #3a8eef;
        }

        .btn-success {
            background: #4CAF50;
            color: white;
        }

        .btn-danger {
            background: #F44336;
            color: white;
        }

        /* Status Bar */
        .status-bar {
            grid-area: status;
            background: #2a2a2a;
            border-top: 1px solid #444;
            display: flex;
            align-items: center;
            padding: 0 20px;
            font-size: 12px;
        }

        .status-item {
            margin-right: 20px;
        }

        .status-item span {
            color: #999;
        }

        .status-item strong {
            color: #e0e0e0;
        }

        /* Processing Overlay */
        .processing-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .processing-overlay.active {
            display: flex;
        }

        .processing-content {
            background: #2a2a2a;
            padding: 40px;
            border-radius: 8px;
            text-align: center;
        }

        .processing-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid #444;
            border-top-color: #4a9eff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .processing-stage {
            margin-top: 10px;
            color: #999;
        }

        /* Zoom Controls */
        .zoom-controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .zoom-btn {
            width: 40px;
            height: 40px;
            background: #2a2a2a;
            border: 1px solid #444;
            color: #e0e0e0;
            cursor: pointer;
            border-radius: 4px;
            font-size: 18px;
        }

        .zoom-btn:hover {
            background: #333;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="header">
            <h1>Arxos BIM Converter</h1>
            <div class="confidence-indicator">
                <span>Confidence:</span>
                <span class="confidence-value confidence-high" id="confidence-value">--</span>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <div class="upload-section">
                <h3>Upload Floor Plan</h3>
                <div class="upload-dropzone" id="upload-dropzone">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                    <p style="margin-top: 10px;">Drop PDF or click to upload</p>
                    <input type="file" id="file-input" accept=".pdf" style="display: none;">
                </div>
            </div>

            <div class="processing-controls">
                <h3>Processing Settings</h3>
                
                <div class="control-group">
                    <label>Building Type</label>
                    <select id="building-type">
                        <option value="educational">Educational</option>
                        <option value="healthcare">Healthcare</option>
                        <option value="office">Office</option>
                        <option value="residential">Residential</option>
                    </select>
                </div>

                <div class="control-group">
                    <label>School Level</label>
                    <select id="school-level">
                        <option value="">Not Applicable</option>
                        <option value="elementary">Elementary</option>
                        <option value="middle">Middle School</option>
                        <option value="high">High School</option>
                    </select>
                </div>

                <div class="control-group">
                    <label>Minimum Confidence: <span id="confidence-threshold">85%</span></label>
                    <input type="range" id="confidence-slider" min="50" max="100" value="85">
                </div>

                <div class="control-group">
                    <label>
                        <input type="checkbox" id="enable-semantic" checked>
                        Enable Semantic Analysis
                    </label>
                </div>

                <div class="control-group">
                    <label>
                        <input type="checkbox" id="require-review" checked>
                        Require Manual Review
                    </label>
                </div>
            </div>
        </div>

        <!-- Viewport -->
        <div class="viewport">
            <div id="building-viewer">
                <svg id="floor-plan" viewBox="0 0 1000 1000">
                    <g id="walls-layer" class="system-structural"></g>
                    <g id="rooms-layer"></g>
                    <g id="labels-layer"></g>
                    <g id="issues-layer"></g>
                </svg>
                <canvas id="interaction-layer"></canvas>
                
                <div class="zoom-controls">
                    <button class="zoom-btn" onclick="viewer.zoomIn()">+</button>
                    <button class="zoom-btn" onclick="viewer.zoomOut()">-</button>
                    <button class="zoom-btn" onclick="viewer.fitToView()">‚ä°</button>
                </div>
            </div>
        </div>

        <!-- Properties Panel -->
        <div class="properties">
            <h3>Building Analysis</h3>
            <div id="analysis-content">
                <p style="color: #666;">No building loaded</p>
            </div>

            <div class="validation-issues">
                <h3>Validation Issues</h3>
                <div id="issues-list"></div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-item">
                <span>Status:</span> <strong id="status-text">Ready</strong>
            </div>
            <div class="status-item">
                <span>Walls:</span> <strong id="wall-count">0</strong>
            </div>
            <div class="status-item">
                <span>Rooms:</span> <strong id="room-count">0</strong>
            </div>
            <div class="status-item">
                <span>Processing Time:</span> <strong id="process-time">--</strong>
            </div>
        </div>
    </div>

    <!-- Manual Review Panel -->
    <div class="review-panel" id="review-panel">
        <div class="review-header">
            <h2>Manual Review Required</h2>
            <span class="confidence-value" id="review-confidence">75%</span>
        </div>
        <div class="review-content">
            <p>The automatic processing has completed with medium confidence.</p>
            <p>Please review the detected issues and make corrections as needed.</p>
            
            <div id="review-issues" style="margin-top: 20px;"></div>
        </div>
        <div class="review-actions">
            <button class="btn btn-success" onclick="approveReview()">Approve</button>
            <button class="btn btn-danger" onclick="rejectReview()">Reject & Edit</button>
            <button class="btn btn-primary" onclick="requestExpertReview()">Request Expert Review</button>
        </div>
    </div>

    <!-- Processing Overlay -->
    <div class="processing-overlay" id="processing-overlay">
        <div class="processing-content">
            <div class="processing-spinner"></div>
            <h3>Processing Floor Plan</h3>
            <div class="processing-stage" id="processing-stage">Extracting segments...</div>
        </div>
    </div>

    <script>
        // BuildingViewer class - Hybrid SVG/Canvas renderer
        class BuildingViewer {
            constructor() {
                this.svg = document.getElementById('floor-plan');
                this.canvas = document.getElementById('interaction-layer');
                this.ctx = this.canvas.getContext('2d');
                
                this.zoom = 1.0;
                this.panX = 0;
                this.panY = 0;
                
                this.walls = [];
                this.rooms = [];
                this.issues = [];
                
                this.selectedWall = null;
                this.isPanning = false;
                this.lastX = 0;
                this.lastY = 0;
                
                this.initializeCanvas();
                this.attachEventListeners();
            }
            
            initializeCanvas() {
                this.resizeCanvas();
                window.addEventListener('resize', () => this.resizeCanvas());
            }
            
            resizeCanvas() {
                const rect = this.svg.getBoundingClientRect();
                this.canvas.width = rect.width;
                this.canvas.height = rect.height;
            }
            
            attachEventListeners() {
                // Mouse events for pan/zoom
                this.svg.addEventListener('mousedown', (e) => this.startPan(e));
                this.svg.addEventListener('mousemove', (e) => this.pan(e));
                this.svg.addEventListener('mouseup', () => this.endPan());
                this.svg.addEventListener('wheel', (e) => this.handleZoom(e));
                
                // Touch events for mobile
                this.svg.addEventListener('touchstart', (e) => this.startPan(e.touches[0]));
                this.svg.addEventListener('touchmove', (e) => this.pan(e.touches[0]));
                this.svg.addEventListener('touchend', () => this.endPan());
            }
            
            startPan(e) {
                this.isPanning = true;
                this.lastX = e.clientX;
                this.lastY = e.clientY;
                this.svg.classList.add('panning');
            }
            
            pan(e) {
                if (!this.isPanning) return;
                
                const deltaX = e.clientX - this.lastX;
                const deltaY = e.clientY - this.lastY;
                
                this.panX += deltaX;
                this.panY += deltaY;
                
                this.updateTransform();
                
                this.lastX = e.clientX;
                this.lastY = e.clientY;
            }
            
            endPan() {
                this.isPanning = false;
                this.svg.classList.remove('panning');
            }
            
            handleZoom(e) {
                e.preventDefault();
                
                const delta = e.deltaY > 0 ? 0.9 : 1.1;
                this.zoom *= delta;
                this.zoom = Math.max(0.1, Math.min(10, this.zoom));
                
                this.updateTransform();
            }
            
            zoomIn() {
                this.zoom *= 1.2;
                this.updateTransform();
            }
            
            zoomOut() {
                this.zoom /= 1.2;
                this.updateTransform();
            }
            
            fitToView() {
                // Calculate bounding box of all elements
                const bbox = this.svg.getBBox();
                const viewBox = this.svg.viewBox.baseVal;
                
                const scaleX = viewBox.width / bbox.width;
                const scaleY = viewBox.height / bbox.height;
                
                this.zoom = Math.min(scaleX, scaleY) * 0.9;
                this.panX = 0;
                this.panY = 0;
                
                this.updateTransform();
            }
            
            updateTransform() {
                const g = this.svg.querySelector('#walls-layer').parentElement;
                if (g) {
                    g.setAttribute('transform', 
                        `translate(${this.panX}, ${this.panY}) scale(${this.zoom})`);
                }
            }
            
            renderWalls(walls) {
                const wallsGroup = document.getElementById('walls-layer');
                wallsGroup.innerHTML = '';
                
                walls.forEach(wall => {
                    const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    rect.setAttribute('class', 'wall');
                    rect.setAttribute('data-id', wall.id);
                    rect.setAttribute('x', wall.startX);
                    rect.setAttribute('y', wall.startY);
                    rect.setAttribute('width', wall.length);
                    rect.setAttribute('height', wall.thickness);
                    
                    if (wall.hasError) {
                        rect.classList.add('error');
                    }
                    
                    rect.addEventListener('click', () => this.selectWall(wall));
                    
                    wallsGroup.appendChild(rect);
                });
                
                this.walls = walls;
                document.getElementById('wall-count').textContent = walls.length;
            }
            
            renderRooms(rooms) {
                const roomsGroup = document.getElementById('rooms-layer');
                const labelsGroup = document.getElementById('labels-layer');
                
                roomsGroup.innerHTML = '';
                labelsGroup.innerHTML = '';
                
                rooms.forEach(room => {
                    // Room polygon
                    const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
                    polygon.setAttribute('class', 'room');
                    polygon.setAttribute('data-id', room.id);
                    polygon.setAttribute('points', room.points.map(p => `${p.x},${p.y}`).join(' '));
                    roomsGroup.appendChild(polygon);
                    
                    // Room label
                    if (room.label) {
                        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                        text.setAttribute('class', 'room-label');
                        text.setAttribute('x', room.centroid.x);
                        text.setAttribute('y', room.centroid.y);
                        text.textContent = room.label;
                        labelsGroup.appendChild(text);
                    }
                });
                
                this.rooms = rooms;
                document.getElementById('room-count').textContent = rooms.length;
            }
            
            renderIssues(issues) {
                const issuesGroup = document.getElementById('issues-layer');
                issuesGroup.innerHTML = '';
                
                issues.forEach(issue => {
                    if (issue.location) {
                        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                        circle.setAttribute('cx', issue.location.x);
                        circle.setAttribute('cy', issue.location.y);
                        circle.setAttribute('r', 5);
                        circle.setAttribute('fill', issue.severity === 'error' ? '#F44336' : '#FFC107');
                        circle.setAttribute('opacity', '0.7');
                        issuesGroup.appendChild(circle);
                    }
                });
                
                this.issues = issues;
                this.updateIssuesList(issues);
            }
            
            updateIssuesList(issues) {
                const issuesList = document.getElementById('issues-list');
                issuesList.innerHTML = '';
                
                issues.forEach(issue => {
                    const item = document.createElement('div');
                    item.className = `issue-item ${issue.severity}`;
                    item.innerHTML = `
                        <div class="issue-title">${issue.type}</div>
                        <div class="issue-description">${issue.description}</div>
                    `;
                    issuesList.appendChild(item);
                });
            }
            
            selectWall(wall) {
                // Clear previous selection
                document.querySelectorAll('.wall.selected').forEach(el => {
                    el.classList.remove('selected');
                });
                
                // Select new wall
                const wallElement = document.querySelector(`[data-id="${wall.id}"]`);
                if (wallElement) {
                    wallElement.classList.add('selected');
                }
                
                this.selectedWall = wall;
                this.showWallProperties(wall);
            }
            
            showWallProperties(wall) {
                const content = document.getElementById('analysis-content');
                content.innerHTML = `
                    <h4>Wall ${wall.id}</h4>
                    <p><strong>Length:</strong> ${(wall.length / 1000).toFixed(2)}m</p>
                    <p><strong>Thickness:</strong> ${wall.thickness}mm</p>
                    <p><strong>Confidence:</strong> ${(wall.confidence * 100).toFixed(1)}%</p>
                    <p><strong>Connections:</strong> ${wall.connections || 0}</p>
                `;
            }
            
            highlightInteractions() {
                // Use Canvas for smooth interaction feedback
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                if (this.selectedWall) {
                    // Draw selection highlight on canvas
                    this.ctx.strokeStyle = '#4a9eff';
                    this.ctx.lineWidth = 3;
                    this.ctx.setLineDash([5, 5]);
                    
                    // Transform coordinates based on SVG transform
                    const x = (this.selectedWall.startX * this.zoom) + this.panX;
                    const y = (this.selectedWall.startY * this.zoom) + this.panY;
                    const width = this.selectedWall.length * this.zoom;
                    const height = this.selectedWall.thickness * this.zoom;
                    
                    this.ctx.strokeRect(x, y, width, height);
                }
            }
        }

        // Initialize viewer
        const viewer = new BuildingViewer();

        // File upload handling
        const dropzone = document.getElementById('upload-dropzone');
        const fileInput = document.getElementById('file-input');

        dropzone.addEventListener('click', () => fileInput.click());
        
        dropzone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropzone.classList.add('dragover');
        });
        
        dropzone.addEventListener('dragleave', () => {
            dropzone.classList.remove('dragover');
        });
        
        dropzone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropzone.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0 && files[0].type === 'application/pdf') {
                processPDF(files[0]);
            }
        });
        
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                processPDF(e.target.files[0]);
            }
        });

        // Processing pipeline simulation
        async function processPDF(file) {
            const overlay = document.getElementById('processing-overlay');
            const stageText = document.getElementById('processing-stage');
            
            overlay.classList.add('active');
            
            // Simulate processing stages
            const stages = [
                'Extracting segments...',
                'Clustering endpoints...',
                'Building topology...',
                'Performing semantic analysis...',
                'Validating structure...',
                'Calculating confidence...'
            ];
            
            for (let i = 0; i < stages.length; i++) {
                stageText.textContent = stages[i];
                await sleep(1000);
            }
            
            overlay.classList.remove('active');
            
            // Simulate results
            const confidence = 0.75 + Math.random() * 0.2;
            displayResults(confidence);
        }

        function displayResults(confidence) {
            // Update confidence indicator
            const confidenceEl = document.getElementById('confidence-value');
            confidenceEl.textContent = `${(confidence * 100).toFixed(1)}%`;
            
            if (confidence >= 0.85) {
                confidenceEl.className = 'confidence-value confidence-high';
            } else if (confidence >= 0.70) {
                confidenceEl.className = 'confidence-value confidence-medium';
            } else {
                confidenceEl.className = 'confidence-value confidence-low';
            }
            
            // Simulate building data
            const walls = generateSampleWalls();
            const rooms = generateSampleRooms();
            const issues = generateSampleIssues();
            
            viewer.renderWalls(walls);
            viewer.renderRooms(rooms);
            viewer.renderIssues(issues);
            
            // Update status
            document.getElementById('status-text').textContent = 
                confidence < 0.85 ? 'Review Required' : 'Completed';
            document.getElementById('process-time').textContent = '1.2s';
            
            // Show review panel if needed
            if (confidence < 0.85 && document.getElementById('require-review').checked) {
                showReviewPanel(confidence);
            }
        }

        function generateSampleWalls() {
            const walls = [];
            for (let i = 0; i < 20; i++) {
                walls.push({
                    id: i + 1,
                    startX: Math.random() * 800 + 100,
                    startY: Math.random() * 800 + 100,
                    length: Math.random() * 200 + 50,
                    thickness: 20,
                    confidence: 0.7 + Math.random() * 0.3,
                    hasError: Math.random() > 0.8
                });
            }
            return walls;
        }

        function generateSampleRooms() {
            return [
                {
                    id: 1,
                    points: [{x: 100, y: 100}, {x: 300, y: 100}, {x: 300, y: 250}, {x: 100, y: 250}],
                    centroid: {x: 200, y: 175},
                    label: 'Classroom 101'
                },
                {
                    id: 2,
                    points: [{x: 300, y: 100}, {x: 500, y: 100}, {x: 500, y: 250}, {x: 300, y: 250}],
                    centroid: {x: 400, y: 175},
                    label: 'Classroom 102'
                }
            ];
        }

        function generateSampleIssues() {
            return [
                {
                    type: 'Disconnected Wall',
                    description: 'Wall segment not connected to structure',
                    severity: 'error',
                    location: {x: 150, y: 200}
                },
                {
                    type: 'Unclosed Room',
                    description: 'Room boundary is not complete',
                    severity: 'warning',
                    location: {x: 350, y: 150}
                }
            ];
        }

        function showReviewPanel(confidence) {
            const panel = document.getElementById('review-panel');
            const confEl = document.getElementById('review-confidence');
            
            confEl.textContent = `${(confidence * 100).toFixed(1)}%`;
            panel.classList.add('active');
        }

        function approveReview() {
            document.getElementById('review-panel').classList.remove('active');
            document.getElementById('status-text').textContent = 'Approved';
        }

        function rejectReview() {
            document.getElementById('review-panel').classList.remove('active');
            // Enter edit mode
        }

        function requestExpertReview() {
            document.getElementById('review-panel').classList.remove('active');
            document.getElementById('status-text').textContent = 'Expert Review Requested';
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // Settings handlers
        document.getElementById('confidence-slider').addEventListener('input', (e) => {
            document.getElementById('confidence-threshold').textContent = `${e.target.value}%`;
        });

        document.getElementById('building-type').addEventListener('change', (e) => {
            const schoolLevel = document.getElementById('school-level');
            schoolLevel.disabled = e.target.value !== 'educational';
        });
    </script>
</body>
</html>