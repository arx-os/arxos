# =============================================================================
# Arx SVG Parser Environment Configuration
# =============================================================================
# Copy this file to .env and update with your actual values
# cp env.example .env

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Connection URL (recommended)
DATABASE_URL=postgresql://arxos:arxos_password@localhost:5432/arxos_svg_db

# Individual database settings (alternative to DATABASE_URL)
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=arxos_svg_db
DATABASE_USER=arxos
DATABASE_PASSWORD=arxos_password
DATABASE_SSL_MODE=disable

# Database connection pool settings
DATABASE_MAX_CONNECTIONS=20
DATABASE_MIN_CONNECTIONS=5
DATABASE_CONNECTION_TIMEOUT=30

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Connection URL (recommended)
REDIS_URL=redis://localhost:6379

# Individual Redis settings (alternative to REDIS_URL)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Redis connection pool settings
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=2

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server settings
SERVER_PORT=8082
SERVER_HOST=0.0.0.0
SERVER_WORKERS=4
SERVER_WORKER_CLASS=uvicorn.workers.UvicornWorker
SERVER_BIND=0.0.0.0:8082

# Environment
ENVIRONMENT=development
LOG_LEVEL=debug
DEBUG=true

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRY=24h
JWT_REFRESH_EXPIRY=168h
JWT_ALGORITHM=HS256

# Password hashing
BCRYPT_COST=12

# Session configuration
SESSION_SECRET=your-session-secret-key-change-this
SESSION_EXPIRY=24h

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# CORS settings
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080,http://127.0.0.1:3000
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,X-CSRF-Token
CORS_EXPOSED_HEADERS=Content-Length,Content-Range
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=86400

# =============================================================================
# CELERY CONFIGURATION
# =============================================================================

# Celery settings
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=30*60
CELERY_TASK_SOFT_TIME_LIMIT=25*60
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================

# File upload settings
UPLOAD_MAX_SIZE=10MB
UPLOAD_PATH=./uploads
UPLOAD_ALLOWED_TYPES=image/svg+xml,application/svg+xml
UPLOAD_TEMP_DIR=./temp
UPLOAD_CLEANUP_INTERVAL=3600

# File processing settings
FILE_PROCESSING_TIMEOUT=300
FILE_PROCESSING_MAX_RETRIES=3
FILE_PROCESSING_RETRY_DELAY=60

# =============================================================================
# VALIDATION CONFIGURATION
# =============================================================================

# Validation settings
VALIDATION_STRICT_MODE=true
VALIDATION_MAX_FILE_SIZE=5MB
VALIDATION_ALLOWED_SVG_TAGS=path,rect,circle,ellipse,line,polyline,polygon,text,g,defs,use
VALIDATION_REQUIRED_ATTRIBUTES=viewBox,width,height
VALIDATION_MAX_ELEMENTS=1000
VALIDATION_MAX_DEPTH=10

# SVG validation rules
SVG_VALIDATION_ENABLED=true
SVG_VALIDATION_SCHEMA_PATH=./data/schemas/svg_schema.json
SVG_VALIDATION_STRICT_MODE=true
SVG_VALIDATION_ALLOW_UNKNOWN_ATTRIBUTES=false

# =============================================================================
# SYMBOL MANAGEMENT
# =============================================================================

# Symbol catalog settings
SYMBOL_CATALOG_PATH=./data/symbols
SYMBOL_CACHE_ENABLED=true
SYMBOL_CACHE_TTL=3600
SYMBOL_CACHE_MAX_SIZE=1000
SYMBOL_AUTO_DISCOVERY=true
SYMBOL_VALIDATION_ENABLED=true

# Symbol processing settings
SYMBOL_PROCESSING_TIMEOUT=120
SYMBOL_PROCESSING_MAX_CONCURRENT=5
SYMBOL_PROCESSING_RETRY_ATTEMPTS=3

# =============================================================================
# AI/ML CONFIGURATION
# =============================================================================

# ML model settings
ML_MODEL_PATH=./models
ML_ENABLED=true
ML_CONFIDENCE_THRESHOLD=0.8
ML_MODEL_CACHE_SIZE=100
ML_MODEL_RELOAD_INTERVAL=3600

# AI processing settings
AI_PROCESSING_ENABLED=true
AI_PROCESSING_TIMEOUT=300
AI_PROCESSING_MAX_CONCURRENT=2
AI_PROCESSING_RETRY_ATTEMPTS=2

# =============================================================================
# PARSING CONFIGURATION
# =============================================================================

# SVG parsing settings
PARSER_TIMEOUT=180
PARSER_MAX_FILE_SIZE=10MB
PARSER_ENABLE_CACHING=true
PARSER_CACHE_TTL=7200
PARSER_MAX_CONCURRENT=10

# BIM conversion settings
BIM_CONVERSION_ENABLED=true
BIM_CONVERSION_TIMEOUT=300
BIM_CONVERSION_MAX_RETRIES=3
BIM_CONVERSION_RETRY_DELAY=30

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# Arx Backend
ARX_BACKEND_URL=http://localhost:8080
ARX_BACKEND_TIMEOUT=30
ARX_BACKEND_RETRY_ATTEMPTS=3

# CMMS Service
CMMS_SERVICE_URL=http://localhost:8081
CMMS_SERVICE_TIMEOUT=30
CMMS_SERVICE_RETRY_ATTEMPTS=3

# AI Service
AI_SERVICE_URL=http://localhost:8083
AI_SERVICE_TIMEOUT=120
AI_SERVICE_RETRY_ATTEMPTS=2

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Metrics settings
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health check settings
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=30

# Logging configuration
LOG_FORMAT=json
LOG_TIMESTAMP=true
LOG_CALLER=true
LOG_LEVEL=debug

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================

# Cache settings
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_PREFIX=arx_svg:
CACHE_MAX_SIZE=1000
CACHE_CLEANUP_INTERVAL=3600

# =============================================================================
# RATE LIMITING
# =============================================================================

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=1m
RATE_LIMIT_STORAGE_URL=redis://localhost:6379/1

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Development mode settings
DEV_MODE=true
DEBUG=true
HOT_RELOAD=true
AUTO_RELOAD=true

# Test settings
TEST_DATABASE_URL=postgresql://arxos:arxos_password@localhost:5432/arxos_svg_test
TEST_REDIS_URL=redis://localhost:6379/1
TEST_UPLOAD_PATH=./test_uploads

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================

# Production overrides (uncomment for production)
# ENVIRONMENT=production
# LOG_LEVEL=info
# DEBUG=false
# DEV_MODE=false
# HOT_RELOAD=false
# AUTO_RELOAD=false

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Deployment settings
DEPLOYMENT_ENV=development
DEPLOYMENT_VERSION=1.0.0
DEPLOYMENT_REGION=us-east-1

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Feature flags
FEATURE_ADVANCED_PARSING=true
FEATURE_ML_ENHANCEMENT=true
FEATURE_REAL_TIME_VALIDATION=true
FEATURE_SYMBOL_AUTO_DISCOVERY=true
FEATURE_CACHE_OPTIMIZATION=true

# =============================================================================
# INTEGRATION SETTINGS
# =============================================================================

# Third-party integrations
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key

GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# Security headers
SECURITY_HEADERS_ENABLED=true
SECURITY_HEADERS_HSTS_MAX_AGE=31536000
SECURITY_HEADERS_CONTENT_SECURITY_POLICY="default-src 'self'"

# API rate limiting
API_RATE_LIMIT_ENABLED=true
API_RATE_LIMIT_REQUESTS=1000
API_RATE_LIMIT_WINDOW=1h

# File security
FILE_SECURITY_SCAN_ENABLED=true
FILE_SECURITY_MAX_SCAN_SIZE=5MB
FILE_SECURITY_ALLOWED_EXTENSIONS=svg,xml

# =============================================================================
# NOTIFICATIONS
# =============================================================================

# Notification settings
NOTIFICATIONS_ENABLED=true
NOTIFICATIONS_EMAIL=true
NOTIFICATIONS_SMS=false
NOTIFICATIONS_PUSH=false

# Slack integration (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#arxos-svg-parser

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================

# Backup settings
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=./backups

# =============================================================================
# PERFORMANCE SETTINGS
# =============================================================================

# Performance tuning
WORKER_POOL_SIZE=4
MAX_CONCURRENT_REQUESTS=100
REQUEST_TIMEOUT=30s
RESPONSE_TIMEOUT=30s

# Memory management
MEMORY_LIMIT=512MB
MEMORY_WARNING_THRESHOLD=80
MEMORY_CRITICAL_THRESHOLD=95

# =============================================================================
# DEBUGGING & PROFILING
# =============================================================================

# Debug settings
DEBUG_PORT=2345
DEBUG_ENABLED=false
PROFILING_ENABLED=false
PROFILING_PORT=6060

# =============================================================================
# DOCUMENTATION
# =============================================================================

# Documentation settings
API_DOCS_ENABLED=true
API_DOCS_PATH=/docs
SWAGGER_ENABLED=true
SWAGGER_PATH=/swagger
REDOC_ENABLED=true
REDOC_PATH=/redoc

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Test settings
TEST_TIMEOUT=30s
TEST_PARALLEL=4
TEST_COVERAGE_THRESHOLD=80
TEST_DATABASE_CLEANUP=true

# =============================================================================
# CI/CD SETTINGS
# =============================================================================

# CI/CD configuration
CI_ENVIRONMENT=false
CI_BUILD_NUMBER=1
CI_COMMIT_SHA=unknown
CI_BRANCH=unknown

# =============================================================================
# LEGACY SUPPORT
# =============================================================================

# Legacy settings (for backward compatibility)
LEGACY_API_ENABLED=false
LEGACY_AUTH_ENABLED=false
LEGACY_DATABASE_ENABLED=false

# =============================================================================
# NOTES
# =============================================================================

# Important notes:
# 1. Change all secret keys in production
# 2. Use strong passwords for database and Redis
# 3. Enable SSL in production
# 4. Set appropriate rate limits for your use case
# 5. Configure monitoring and alerting
# 6. Set up proper backup strategies
# 7. Review security settings before deployment
# 8. Ensure SVG validation is properly configured
# 9. Set up Celery workers for background processing
# 10. Configure ML models for advanced parsing 