{{define "navigation"}}
<a href="/core/dashboard" class="tier-nav-item core {{if eq .CurrentPage "dashboard"}}active{{end}}">
    <i class="fas fa-tachometer-alt"></i>
    Dashboard
</a>
<a href="/core/buildings" class="tier-nav-item core {{if eq .CurrentPage "buildings"}}active{{end}}">
    <i class="fas fa-building"></i>
    Buildings
</a>
<a href="/core/equipment" class="tier-nav-item core {{if eq .CurrentPage "equipment"}}active{{end}}">
    <i class="fas fa-cogs"></i>
    Equipment
</a>
<a href="/core/spatial" class="tier-nav-item core {{if eq .CurrentPage "spatial"}}active{{end}}">
    <i class="fas fa-map"></i>
    Spatial
</a>
<a href="/core/docs" class="tier-nav-item core {{if eq .CurrentPage "docs"}}active{{end}}">
    <i class="fas fa-book"></i>
    Docs
</a>
<a href="/core/upgrade" class="tier-nav-item core {{if eq .CurrentPage "upgrade"}}active{{end}}">
    <i class="fas fa-arrow-up"></i>
    Upgrade
</a>
{{end}}

{{define "footer_links"}}
<a href="https://github.com/arx-os/arxos" class="text-blue-600 hover:text-blue-800">GitHub</a> |
<a href="/core/docs" class="text-blue-600 hover:text-blue-800">Documentation</a> |
<a href="/core/license" class="text-blue-600 hover:text-blue-800">License</a>
{{end}}

{{define "content"}}
            <!-- Welcome Section -->
            <div class="tier-fade-in">
                <div class="tier-card core">
                    <div class="tier-card-header">
                        <h1 class="tier-card-title">Welcome to ArxOS Core</h1>
                        <p class="tier-card-subtitle">The free, open-source building operating system</p>
                    </div>
                    <div class="tier-card-body">
                        <p class="mb-4">ArxOS Core provides essential building management capabilities including building modeling, equipment tracking, and spatial data management. Built with PostGIS for precise spatial operations and designed for scalability.</p>
                        <div class="tier-grid tier-grid-3">
                            <div class="feature-item">
                                <i class="fas fa-database text-blue-600"></i>
                                <h3>PostGIS Integration</h3>
                                <p>Industry-standard spatial database for precise building data</p>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-code text-blue-600"></i>
                                <h3>CLI Interface</h3>
                                <p>Powerful command-line tools for building management</p>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-share-alt text-blue-600"></i>
                                <h3>Version Control</h3>
                                <p>Git-like versioning for building data and configurations</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="tier-grid tier-grid-4 mt-6" 
                 hx-get="/api/v1/core/dashboard/stats" 
                 hx-trigger="load"
                 hx-target="this"
                 hx-swap="innerHTML">
                <div class="tier-card core tier-fade-in">
                    <div class="tier-card-body text-center">
                        <div class="text-3xl font-bold text-blue-600">{{.Stats.Buildings}}</div>
                        <div class="text-sm text-gray-600">Buildings</div>
                    </div>
                </div>
                <div class="tier-card core tier-fade-in">
                    <div class="tier-card-body text-center">
                        <div class="text-3xl font-bold text-blue-600">{{.Stats.Equipment}}</div>
                        <div class="text-sm text-gray-600">Equipment</div>
                    </div>
                </div>
                <div class="tier-card core tier-fade-in">
                    <div class="tier-card-body text-center">
                        <div class="text-3xl font-bold text-blue-600">{{.Stats.SpatialFeatures}}</div>
                        <div class="text-sm text-gray-600">Spatial Features</div>
                    </div>
                </div>
                <div class="tier-card core tier-fade-in">
                    <div class="tier-card-body text-center">
                        <div class="text-3xl font-bold text-green-600">{{.Stats.APICallsToday}}</div>
                        <div class="text-sm text-gray-600">API Calls Today</div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="tier-grid tier-grid-2 mt-6">
                <div class="tier-card core tier-fade-in">
                    <div class="tier-card-header">
                        <h2 class="tier-card-title">Recent Buildings</h2>
                    </div>
                    <div class="tier-card-body">
                        <div class="space-y-3" 
                             hx-get="/api/v1/core/buildings/recent" 
                             hx-trigger="load"
                             hx-target="this"
                             hx-swap="innerHTML">
                            {{range .RecentBuildings}}
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <h4 class="font-medium">{{.Name}}</h4>
                                    <p class="text-sm text-gray-600">{{.Path}}</p>
                                </div>
                                <span class="tier-status success">Active</span>
                            </div>
                            {{else}}
                            <p class="text-gray-500 text-center py-4">No buildings found</p>
                            {{end}}
                        </div>
                        <div class="tier-card-footer">
                            <a href="/core/buildings" class="tier-btn tier-btn-primary core">
                                <i class="fas fa-plus"></i>
                                Add Building
                            </a>
                        </div>
                    </div>
                </div>

                <div class="tier-card core tier-fade-in">
                    <div class="tier-card-header">
                        <h2 class="tier-card-title">Recent Equipment</h2>
                    </div>
                    <div class="tier-card-body">
                        <div class="space-y-3" 
                             hx-get="/api/v1/core/equipment/recent" 
                             hx-trigger="load"
                             hx-target="this"
                             hx-swap="innerHTML">
                            {{range .RecentEquipment}}
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <h4 class="font-medium">{{.Name}}</h4>
                                    <p class="text-sm text-gray-600">{{.Type}} â€¢ {{.Path}}</p>
                                </div>
                                <span class="tier-status success">Active</span>
                            </div>
                            {{else}}
                            <p class="text-gray-500 text-center py-4">No equipment found</p>
                            {{end}}
                        </div>
                        <div class="tier-card-footer">
                            <a href="/core/equipment" class="tier-btn tier-btn-primary core">
                                <i class="fas fa-plus"></i>
                                Add Equipment
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CLI Commands -->
            <div class="tier-card core tier-fade-in mt-6">
                <div class="tier-card-header">
                    <h2 class="tier-card-title">Quick CLI Commands</h2>
                    <p class="tier-card-subtitle">Essential commands for building management</p>
                </div>
                <div class="tier-card-body">
                    <div class="tier-grid tier-grid-2">
                        <div class="cli-command">
                            <code class="bg-gray-100 p-2 rounded text-sm">arxos building create "Office Building"</code>
                            <p class="text-sm text-gray-600 mt-1">Create a new building</p>
                        </div>
                        <div class="cli-command">
                            <code class="bg-gray-100 p-2 rounded text-sm">arxos equipment add --building="office" --type="hvac"</code>
                            <p class="text-sm text-gray-600 mt-1">Add equipment to a building</p>
                        </div>
                        <div class="cli-command">
                            <code class="bg-gray-100 p-2 rounded text-sm">arxos spatial query --area="1000"</code>
                            <p class="text-sm text-gray-600 mt-1">Query spatial features by area</p>
                        </div>
                        <div class="cli-command">
                            <code class="bg-gray-100 p-2 rounded text-sm">arxos export --format=ifc</code>
                            <p class="text-sm text-gray-600 mt-1">Export building data to IFC</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Upgrade Notice -->
            <div class="tier-card core tier-fade-in mt-6">
                <div class="tier-card-body">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-lg font-semibold">Ready for More?</h3>
                            <p class="text-gray-600">Upgrade to Hardware Platform for IoT device management and marketplace access.</p>
                        </div>
                        <a href="/core/upgrade" class="tier-btn tier-btn-primary core">
                            <i class="fas fa-arrow-up"></i>
                            Upgrade Now
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

{{end}}

{{template "base.html" .}}
